<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Load Code - ConvertBetCodes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com/" />
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&family=SUSE:wght@100..800&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --adminuiux-content-font: "Open Sans", sans-serif;
      --adminuiux-title-font: "SUSE", sans-serif;
    }
    
    /* Load Code Specific Styles */
    .load-code-container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .load-code-card {
      background: white;
      border-radius: 12px;
      padding: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .load-code-header {
      margin-bottom: 32px;
      text-align: center;
    }
    
    .load-code-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      color: white;
      font-size: 36px;
    }
    
    .load-code-title {
      font-size: 24px;
      font-weight: 700;
      color: #212121;
      margin: 0 0 8px 0;
    }
    
    .load-code-subtitle {
      font-size: 14px;
      color: #757575;
      margin: 0;
    }
    
    .load-form-group {
      margin-bottom: 24px;
    }
    
    .load-form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #424242;
      margin-bottom: 8px;
    }
    
    .load-form-input,
    .load-form-select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 15px;
      font-family: var(--adminuiux-content-font);
      transition: all 0.2s ease;
    }
    
    .load-form-input:focus,
    .load-form-select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .load-input-wrapper {
      position: relative;
    }
    
    .load-paste-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: #f5f5f5;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      cursor: pointer;
      color: #666;
      transition: all 0.2s ease;
    }
    
    .load-paste-btn:hover {
      background: #eeeeee;
      color: #333;
    }
    
    .load-submit-btn {
      width: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 14px 24px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .load-submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
    
    .load-submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .load-cancel-btn {
      width: 100%;
      background: transparent;
      color: #666;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 12px;
    }
    
    .load-cancel-btn:hover {
      border-color: #bdbdbd;
      background: #f5f5f5;
    }
    
    /* Loading State */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    
    .loading-overlay.active {
      display: flex;
    }
    
    .loading-content {
      background: white;
      border-radius: 12px;
      padding: 40px;
      text-align: center;
      max-width: 300px;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid #e0e0e0;
      border-top-color: #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      font-size: 16px;
      font-weight: 600;
      color: #424242;
      margin: 0;
    }
    
    /* Success Message */
    .success-message {
      background: #e8f5e9;
      border: 2px solid #4caf50;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 24px;
      display: none;
      align-items: center;
      gap: 12px;
      animation: slideDown 0.3s ease-out;
    }
    
    .success-message.show {
      display: flex;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .success-icon {
      flex-shrink: 0;
      width: 32px;
      height: 32px;
      background: #4caf50;
      border-radius: 50%;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    .success-text {
      flex: 1;
      font-size: 14px;
      font-weight: 600;
      color: #2e7d32;
      margin: 0;
    }
  </style>
  <script defer src="assets/js/app8051.js?bd1e16b080f637e63a80"></script>
  <link href="assets/css/app8051.css?bd1e16b080f637e63a80" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/css/main.css" />
  <link rel="stylesheet" href="./assets/css/betslip-rail.css" />
</head>

<body class="main-bg main-bg-opac adminuiux-header-standard theme-blue adminuiux-header-transparent adminuiux-sidebar-fill-white adminuiux-sidebar-standard bg-r-gradient scrollup">
  
  <div id="desktop-nav"></div>
  <div id="side-menu"></div>

  <div class="adminuiux-wrap">
    <main class="adminuiux-content has-sidebar" onclick="contentClick()">
      
      <div class="container-fluid py-1 py-lg-3">
        <div class="row gx-3 gx-lg-4 align-items-center page-title">
          <div class="col col-sm">
            <h6 class="mb-0">Load Bet Code</h6>
            <p class="text-secondary small">Import bets from any bookmaker</p>
          </div>
        </div>
      </div>

      <div class="mt-3 p-1">
        <div class="load-code-container">
          <div class="load-code-card">
            
            <!-- Header -->
            <div class="load-code-header">
              <div class="load-code-icon">
                <i class="bi bi-download"></i>
              </div>
              <h1 class="load-code-title">Load Bet Code</h1>
              <p class="load-code-subtitle">Enter your betting code to import selections</p>
            </div>

            <!-- Success Message (hidden by default) -->
            <div class="success-message" id="success-message">
              <div class="success-icon">
                <i class="bi bi-check"></i>
              </div>
              <p class="success-text" id="success-text">
                Successfully loaded 4 bets! Check your betslip below.
              </p>
            </div>

            <!-- Load Form -->
            <form id="load-code-form">
              
              <div class="load-form-group">
                <label class="load-form-label">Bet Code</label>
                <div class="load-input-wrapper">
                  <input 
                    type="text" 
                    class="load-form-input" 
                    id="bet-code-input"
                    placeholder="e.g., M8BULE"
                    required
                    autocomplete="off"
                  />
                  <button type="button" class="load-paste-btn" id="paste-btn" title="Paste from clipboard">
                    <i class="bi bi-clipboard"></i>
                  </button>
                </div>
              </div>

              <div class="load-form-group">
                <label class="load-form-label">Origin Bookie</label>
                <select class="load-form-select" id="origin-bookie" required>
                  <option value="">Select bookie</option>
                  <option value="sportybet:ng">Sportybet - Nigeria</option>
                  <option value="sportybet:gh">Sportybet - Ghana</option>
                  <option value="sportybet:ke">Sportybet - Kenya</option>
                  <option value="bet9ja:ng">Bet9ja - Nigeria</option>
                  <option value="betking:ng">BetKing - Nigeria</option>
                  <option value="1xbet:ng">1xBet - Nigeria</option>
                  <option value="22bet:ng">22bet - Nigeria</option>
                  <option value="nairabet:ng">NairaBet - Nigeria</option>
                </select>
              </div>

              <button type="submit" class="load-submit-btn" id="submit-btn">
                <i class="bi bi-download"></i>
                Load Code
              </button>

              <button type="button" class="load-cancel-btn" id="cancel-btn">
                Cancel
              </button>

            </form>

          </div>
        </div>
      </div>

    </main>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p class="loading-text">Loading bet code...</p>
    </div>
  </div>

  <!-- Shared betslip rail -->
  <div id="betslip-rail"></div>

  <div id="filter-canvas"></div>
  <div id="mobile-nav"></div>

  <script src="assets/js/adminux/adminux-dashboard.js"></script>
  <script src="./components/AppLayout.js"></script>
  <script src="./components/betslip-rail.js"></script>
  <script>
    // ==================== WAIT FOR RAIL ====================
    function waitForRail() {
      return new Promise((resolve) => {
        if (window.betslipRail) {
          resolve();
        } else {
          const checkInterval = setInterval(() => {
            if (window.betslipRail) {
              clearInterval(checkInterval);
              resolve();
            }
          }, 50);
        }
      });
    }

    // ==================== PASTE FROM CLIPBOARD ====================
    document.getElementById('paste-btn').addEventListener('click', async () => {
      try {
        const text = await navigator.clipboard.readText();
        document.getElementById('bet-code-input').value = text.trim();
      } catch (err) {
        console.log('Paste failed:', err);
      }
    });

    // ==================== CANCEL BUTTON ====================
    document.getElementById('cancel-btn').addEventListener('click', () => {
      window.location.href = 'bet-editor.html';
    });

    // ==================== FORM SUBMISSION ====================
    document.getElementById('load-code-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const betCode = document.getElementById('bet-code-input').value.trim();
      const bookie = document.getElementById('origin-bookie').value;
      
      if (!betCode || !bookie) {
        alert('Please fill in all fields');
        return;
      }

      // Wait for Rail to be ready
      await waitForRail();

      // Show loading overlay
      const loadingOverlay = document.getElementById('loading-overlay');
      const submitBtn = document.getElementById('submit-btn');
      
      loadingOverlay.classList.add('active');
      submitBtn.disabled = true;

      try {
        // Simulate API call to fetch bet code data
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Mock API response - replace with actual API call
        const mockBets = [
          {
            matchId: 'load-' + Date.now() + '-1',
            teams: 'Nottingham Forest vs Man City',
            date: 'Sat December.27.25, 13:30',
            market: '1x2',
            value: 'away',
            odd: '1.62',
            league: 'Premier League',
            selected: true
          },
          {
            matchId: 'load-' + Date.now() + '-2',
            teams: 'AC Milan vs Verona',
            date: 'Sun December.28.25, 12:30',
            market: '1x2',
            value: 'home',
            odd: '1.39',
            league: 'Serie A',
            selected: true
          },
          {
            matchId: 'load-' + Date.now() + '-3',
            teams: 'Liverpool vs Wolves',
            date: 'Sat December.27.25, 16:00',
            market: '1x2',
            value: 'home',
            odd: '1.26',
            league: 'Premier League',
            selected: true
          },
          {
            matchId: 'load-' + Date.now() + '-4',
            teams: 'Zambia vs Comoros',
            date: 'Fri December.26.25, 18:30',
            market: '1x2',
            value: 'home',
            odd: '2.17',
            league: 'Africa Cup of Nations',
            selected: true
          }
        ];

        // Add all bets to the Rail
        mockBets.forEach(bet => {
          if (window.betslipRail && window.betslipRail.addSelection) {
            window.betslipRail.addSelection(bet);
          }
        });

        // Hide loading
        loadingOverlay.classList.remove('active');
        submitBtn.disabled = false;

        // Show success message
        const successMessage = document.getElementById('success-message');
        const successText = document.getElementById('success-text');
        successText.textContent = `Successfully loaded ${mockBets.length} bets! Check your betslip below.`;
        successMessage.classList.add('show');

        // Flash the badge
        if (window.betslipRail && window.betslipRail.flashBadge) {
          window.betslipRail.flashBadge();
        }

        // Redirect to bet editor after 2 seconds
        setTimeout(() => {
          window.location.href = 'bet-editor.html';
        }, 2000);

      } catch (error) {
        console.error('Load error:', error);
        
        // Hide loading
        loadingOverlay.classList.remove('active');
        submitBtn.disabled = false;
        
        alert('Failed to load bet code. Please try again.');
      }
    });

    // ==================== INITIALIZE ====================
    window.addEventListener('DOMContentLoaded', async () => {
      // Wait for Rail
      await waitForRail();
      
      // Focus on bet code input
      document.getElementById('bet-code-input').focus();
    });
  </script>
</body>
</html>