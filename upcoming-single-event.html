<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Event Details - ConvertBetCodes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com/" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&amp;family=SUSE:wght@100..800&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --adminuiux-content-font: "Open Sans", sans-serif;
        --adminuiux-content-font-weight: 400;
        --adminuiux-title-font: "SUSE", sans-serif;
        --adminuiux-title-font-weight: 600;
      }
    </style>
    <script defer src="assets/js/app8051.js?bd1e16b080f637e63a80"></script>
    <link href="assets/css/app8051.css?bd1e16b080f637e63a80" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/betslip-rail.css">
    <link rel="stylesheet" href="./assets/css/upcoming-single-event.css" />
  </head>

  <body
    class="main-bg main-bg-opac adminuiux-header-standard theme-blue adminuiux-header-transparent adminuiux-sidebar-fill-white adminuiux-sidebar-standard bg-r-gradient scrollup"
    data-theme="theme-blue"
    data-sidebarfill="adminuiux-sidebar-fill-white"
    data-sidebarlayout="adminuiux-sidebar-standard"
    data-bs-spy="scroll"
    data-bs-target="#list-example"
    data-bs-smooth-scroll="true"
    tabindex="0"
    data-headerlayout="adminuiux-header-standard"
    data-bggradient="bg-r-gradient"
    data-headerfill="adminuiux-header-transparent"
  >
    <div id="side-menu"></div>

    <!-- main content -->
    <div class="adminuiux-wrap">
      <main class="adminuiux-content has-sidebar" onclick="contentClick()">
        <!-- Event Header -->
        <div class="event-header" id="eventHeader">
          <div class="header-top">
            <button class="header-back" onclick="history.back()">
              <i class="bi bi-chevron-left"></i>
            </button>

            <div class="header-logo">Details</div>

            <div class="header-actions">
              <button class="header-btn">
                <i class="bi bi-search"></i>
              </button>
              <button class="header-btn">
                <i class="bi bi-house"></i>
              </button>
            </div>
          </div>

          <div class="match-info">
            <div class="match-league">
              <span class="league-name"
                >Football - England - Premier League</span
              >
            </div>

            <div class="match-teams">
              <div class="team home">
                <div class="team-logo"><i class="bi bi-shield"></i></div>
                <div class="team-name">Leeds United</div>
              </div>

              <div class="match-vs">—</div>

              <div class="team away">
                <div class="team-logo"><i class="bi bi-shield"></i></div>
                <div class="team-name">Man Utd</div>
              </div>
            </div>

            <div class="match-time">Sun 04/01, 13:30</div>
          </div>

          <div class="action-tabs">
            <button class="action-tab active">
              <i class="bi bi-list-ul"></i>
              Markets
            </button>
            <button class="action-tab">
              <i class="bi bi-graph-up"></i>
              Stats
            </button>
            <button class="action-tab">
              <i class="bi bi-chat-dots"></i>
              Comments
            </button>
          </div>

          <div class="market-filter-bar" id="marketFilterBar">
            <button class="market-tab favorite">
              <i class="bi bi-star"></i>
            </button>
            <button class="market-tab active">All</button>
            <button class="market-tab">Main</button>
            <button class="market-tab">Goals</button>
            <button class="market-tab">Corners</button>
            <button class="market-tab">Half</button>
            <button class="market-tab">Cards</button>
            <button class="market-tab">Players</button>
            <button class="market-tab">Specials</button>
          </div>
        </div>

        <div class="markets-container">
          <!-- 1X2 Market -->
          <div class="market-group" data-market="1x2">
            <div class="market-header" onclick="toggleMarket(this)">
              <div class="market-header-left">
                <span class="market-title">1X2</span>
                <span class="info-icon" onclick="showMarketInfo(event, '1x2')">
                  <i class="bi bi-info"></i>
                </span>
              </div>
              <div class="market-expand">
                <span>4 bookies</span>
                <i class="bi bi-chevron-down expand-icon"></i>
              </div>
            </div>

            <div class="market-options">
              <div class="options-grid">
                <div class="option-label"></div>
                <div class="option-headers">
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'home')"
                  >
                    1
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'draw')"
                  >
                    X
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'away')"
                  >
                    2
                  </button>
                </div>
              </div>
            </div>

            <div class="bookie-list">
              <div
                class="bookie-row"
                data-home="2.69"
                data-draw="3.48"
                data-away="2.63"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">1XBET</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">2.69</div>
                  <div class="odd-value">3.48</div>
                  <div class="odd-value">2.63</div>
                </div>
              </div>

              <div
                class="bookie-row"
                data-home="1.73"
                data-draw="3.48"
                data-away="1.71"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">BET9JA</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.73</div>
                  <div class="odd-value">3.48</div>
                  <div class="odd-value">1.71</div>
                </div>
              </div>

              <div class="bookie-row" data-home="2.48" data-away="3.48">
                <div class="bookie-name">
                  <div class="bookie-logo">BETKING</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">2.48</div>
                  <div class="odd-dash">—</div>
                  <div class="odd-value">3.48</div>
                </div>
              </div>

              <div
                class="bookie-row"
                data-home="2.65"
                data-draw="3.48"
                data-away="2.55"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">SPORTY</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">2.65</div>
                  <div class="odd-value">3.48</div>
                  <div class="odd-value">2.55</div>
                </div>
              </div>
            </div>
          </div>

          <!-- 1X2 - 1UP Market -->
          <div class="market-group" data-market="1x2-1up">
            <div class="market-header" onclick="toggleMarket(this)">
              <div class="market-header-left">
                <span class="market-title">1X2 - 1UP</span>
                <span
                  class="info-icon"
                  onclick="showMarketInfo(event, '1x2-1up')"
                >
                  <i class="bi bi-info"></i>
                </span>
              </div>
              <div class="market-expand">
                <span>3 bookies</span>
                <i class="bi bi-chevron-down expand-icon"></i>
              </div>
            </div>

            <div class="market-options">
              <div class="options-grid">
                <div class="option-label"></div>
                <div class="option-headers">
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'home')"
                  >
                    1
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'draw')"
                  >
                    X
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'away')"
                  >
                    2
                  </button>
                </div>
              </div>
            </div>

            <div class="bookie-list">
              <div
                class="bookie-row"
                data-home="1.73"
                data-draw="3.48"
                data-away="1.71"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">1XBET</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.73</div>
                  <div class="odd-value">3.48</div>
                  <div class="odd-value">1.71</div>
                </div>
              </div>

              <div
                class="bookie-row"
                data-home="1.73"
                data-draw="3.48"
                data-away="1.71"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">BET9JA</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.73</div>
                  <div class="odd-value">3.48</div>
                  <div class="odd-value">1.71</div>
                </div>
              </div>

              <div class="bookie-row" data-home="2.48">
                <div class="bookie-name">
                  <div class="bookie-logo">SPORTY</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">2.48</div>
                  <div class="odd-dash">—</div>
                  <div class="odd-dash">—</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Over/Under Market -->
          <div class="market-group collapsed" data-market="over-under">
            <div class="market-header" onclick="toggleMarket(this)">
              <div class="market-header-left">
                <span class="market-title">Over/Under - Early Goals</span>
                <span
                  class="info-icon"
                  onclick="showMarketInfo(event, 'over-under')"
                >
                  <i class="bi bi-info"></i>
                </span>
              </div>
              <div class="market-expand">
                <span>3 bookies</span>
                <i class="bi bi-chevron-down expand-icon"></i>
              </div>
            </div>

            <div class="market-options">
              <div class="options-grid">
                <div class="option-label"></div>
                <div class="option-headers">
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'over')"
                  >
                    Over
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'under')"
                  >
                    Under
                  </button>
                </div>
              </div>
            </div>

            <div class="bookie-list">
              <div class="bookie-row" data-over="1.23">
                <div class="bookie-name">
                  <div class="bookie-logo">1XBET</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.23</div>
                  <div class="odd-dash">—</div>
                </div>
              </div>

              <div class="bookie-row" data-over="1.75">
                <div class="bookie-name">
                  <div class="bookie-logo">BET9JA</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.75</div>
                  <div class="odd-dash">—</div>
                </div>
              </div>

              <div class="bookie-row" data-over="2.75">
                <div class="bookie-name">
                  <div class="bookie-logo">SPORTY</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">2.75</div>
                  <div class="odd-dash">—</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Double Chance Market -->
          <div class="market-group collapsed" data-market="double-chance">
            <div class="market-header" onclick="toggleMarket(this)">
              <div class="market-header-left">
                <span class="market-title">Double Chance</span>
                <span
                  class="info-icon"
                  onclick="showMarketInfo(event, 'double-chance')"
                >
                  <i class="bi bi-info"></i>
                </span>
              </div>
              <div class="market-expand">
                <span>3 bookies</span>
                <i class="bi bi-chevron-down expand-icon"></i>
              </div>
            </div>

            <div class="market-options">
              <div class="options-grid">
                <div class="option-label"></div>
                <div class="option-headers">
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'home-draw')"
                  >
                    1X
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'home-away')"
                  >
                    12
                  </button>
                  <button
                    class="option-header"
                    onclick="sortByOption(this, 'draw-away')"
                  >
                    X2
                  </button>
                </div>
              </div>
            </div>

            <div class="bookie-list">
              <div
                class="bookie-row"
                data-home-draw="1.48"
                data-home-away="1.32"
                data-draw-away="1.46"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">1XBET</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.48</div>
                  <div class="odd-value">1.32</div>
                  <div class="odd-value">1.46</div>
                </div>
              </div>

              <div
                class="bookie-row"
                data-home-draw="1.48"
                data-home-away="1.32"
                data-draw-away="1.46"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">BET9JA</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.48</div>
                  <div class="odd-value">1.32</div>
                  <div class="odd-value">1.46</div>
                </div>
              </div>

              <div
                class="bookie-row"
                data-home-draw="1.48"
                data-home-away="1.32"
                data-draw-away="1.46"
              >
                <div class="bookie-name">
                  <div class="bookie-logo">SPORTY</div>
                </div>
                <div class="bookie-odds">
                  <div class="odd-value">1.48</div>
                  <div class="odd-value">1.32</div>
                  <div class="odd-value">1.46</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- <div id="side-menu"></div> -->
    <div id="betslip-rail"></div>
    <div id="mobile-nav"></div>

    <script src="assets/js/adminux/adminux-dashboard.js"></script>
    <script src="./components/AppLayout.js"></script>
    <script src="./components/betslip-rail.js"></script>
    <script>
      // ================================
      // Scroll handling
      // ================================
      let lastScrollTop = 0;
      const header = document.getElementById("eventHeader");
      const bottomNav = document.getElementById("bottomNav");
      const scrollThreshold = 100;

      window.addEventListener("scroll", () => {
        const scrollTop =
          window.pageYOffset || document.documentElement.scrollTop;

        // Compact header
        if (scrollTop > 50) {
          header.classList.add("scrolled");
        } else {
          header.classList.remove("scrolled");
        }

        // Hide / show bottom nav
        if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
          bottomNav.classList.add("hidden");
        } else {
          bottomNav.classList.remove("hidden");
        }

        lastScrollTop = scrollTop;
      });

      // ================================
      // Toggle market collapse/expand
      // ================================
      function toggleMarket(headerEl) {
        const marketGroup = headerEl.closest(".market-group");
        marketGroup.classList.toggle("collapsed");
      }

      // ================================
      // Market info tooltips
      // ================================
      function showMarketInfo(event, marketType) {
        event.stopPropagation();

        const infoTexts = {
          "1x2":
            "Predict the final match result. 1 = Home win, X = Draw, 2 = Away win.",
          "1x2-1up":
            "Applies when one team goes 1 goal up. If they maintain the lead, the bet wins.",
          "over-under":
            "Predict whether total goals will be over or under a set line.",
          "double-chance":
            "Covers two outcomes: 1X (Home/Draw), 12 (Home/Away), X2 (Draw/Away).",
        };

        alert(infoTexts[marketType] || "Market information");
      }

      // ================================
      // Sorting & Best Odds Highlight
      // ================================
      let currentSort = {
        market: null,
        option: null,
      };

      function sortByOption(headerEl, option) {
        const marketGroup = headerEl.closest(".market-group");
        const marketType = marketGroup.dataset.market;
        const bookieList = marketGroup.querySelector(".bookie-list");
        const rows = Array.from(bookieList.querySelectorAll(".bookie-row"));

        // Reset header styles
        marketGroup.querySelectorAll(".option-header").forEach((btn) => {
          btn.classList.remove("sorting");
        });
        headerEl.classList.add("sorting");

        // Sort rows
        rows.sort((a, b) => {
          const aVal = parseFloat(a.dataset[option]) || 0;
          const bVal = parseFloat(b.dataset[option]) || 0;
          return bVal - aVal;
        });

        // Re-append sorted rows
        rows.forEach((row) => bookieList.appendChild(row));

        // Remove previous best highlights
        marketGroup.querySelectorAll(".odd-value").forEach((odd) => {
          odd.classList.remove("best");
        });

        // Highlight best odd in selected column
        let bestValue = 0;
        rows.forEach((row) => {
          const val = parseFloat(row.dataset[option]) || 0;
          if (val > bestValue) bestValue = val;
        });

        rows.forEach((row) => {
          const odds = row.querySelectorAll(".odd-value");
          const headers = Array.from(
            marketGroup.querySelectorAll(".option-header")
          );
          const index = headers.findIndex((h) => h === headerEl);

          if (index !== -1 && odds[index]) {
            const oddVal = parseFloat(odds[index].textContent);
            if (oddVal === bestValue) {
              odds[index].classList.add("best");
            }
          }
        });

        currentSort.market = marketType;
        currentSort.option = option;
      }

      // ================================
      // Market filter tabs (UI only)
      // ================================
      document.querySelectorAll(".market-tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          document
            .querySelectorAll(".market-tab")
            .forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
        });
      });

      // ================================
      // Odds click (future betslip hook)
      // ================================
      document.querySelectorAll(".odd-value").forEach((odd) => {
        odd.addEventListener("click", () => {
          console.log("Selected odd:", odd.textContent);
        });
      });
    </script>
  </body>
</html>
